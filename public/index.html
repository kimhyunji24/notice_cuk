<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CUK ê³µì§€ì‚¬í•­ ì•Œë¦¬ë¯¸</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="favicon.ico">
    <meta name="theme-color" content="#2563eb">
    <meta name="description" content="ê°€í†¨ë¦­ëŒ€í•™êµ í•™ê³¼ ê³µì§€ì‚¬í•­ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ë°›ì•„ë³´ì„¸ìš”">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="header-content">
                <h1 class="title">
                    <span class="title-icon">ğŸ””</span>
                    CUK ê³µì§€ì‚¬í•­ ì•Œë¦¬ë¯¸
                </h1>
                <p class="subtitle">ê°€í†¨ë¦­ëŒ€í•™êµ í•™ê³¼ ê³µì§€ì‚¬í•­ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ë°›ì•„ë³´ì„¸ìš”</p>
            </div>
        </header>

        <main class="main">
            <!-- ì•Œë¦¼ ê¶Œí•œ ìƒíƒœ -->
            <div id="permission-card" class="card hidden">
                <div class="card-header">
                    <h2>ğŸ” ì•Œë¦¼ ê¶Œí•œ í•„ìš”</h2>
                </div>
                <div class="card-content">
                    <p>ê³µì§€ì‚¬í•­ ì•Œë¦¼ì„ ë°›ìœ¼ë ¤ë©´ ë¸Œë¼ìš°ì € ì•Œë¦¼ ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.</p>
                    <button id="enable-notifications" class="btn btn-primary">
                        ì•Œë¦¼ ê¶Œí•œ í—ˆìš©í•˜ê¸°
                    </button>
                </div>
            </div>

            <!-- êµ¬ë… ì„¤ì • -->
            <div id="subscription-card" class="card">
                <div class="card-header">
                    <h2>ğŸ“š êµ¬ë…í•  í•™ê³¼ ì„ íƒ</h2>
                    <button id="manage-subscriptions" class="btn-secondary" style="margin-top: 10px;">
                        ğŸ“‹ ë‚´ êµ¬ë… ê´€ë¦¬
                    </button>
                </div>
                <div class="card-content">
                    <div id="loading-state" class="loading">
                        <div class="spinner"></div>
                        <p>í•™ê³¼ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
                    </div>

                    <div id="subscription-form" class="hidden">
                        <div class="search-container">
                            <input type="text" id="search-input" class="search-input" 
                                   placeholder="í•™ê³¼ëª…ì„ ê²€ìƒ‰í•˜ì„¸ìš” (ì˜ˆ: ì»´í“¨í„°, ì˜ì–´, ê²½ì˜)">
                        </div>

                        <div class="filter-tabs">
                            <button class="filter-tab active" data-category="all">ì „ì²´</button>
                            <button class="filter-tab" data-category="ê³µí•™ê³„ì—´">ê³µí•™</button>
                            <button class="filter-tab" data-category="ì¸ë¬¸ê³„ì—´">ì¸ë¬¸</button>
                            <button class="filter-tab" data-category="ê²½ì˜ê³„ì—´">ê²½ì˜</button>
                            <button class="filter-tab" data-category="ìì—°ê³„ì—´">ìì—°</button>
                        </div>

                        <div class="select-actions">
                            <button id="select-all" class="btn btn-secondary">ì „ì²´ ì„ íƒ</button>
                            <button id="clear-all" class="btn btn-secondary">ì „ì²´ í•´ì œ</button>
                            <span id="selected-count" class="selected-count">ì„ íƒë¨: 0ê°œ</span>
                        </div>

                        <div id="sites-container" class="sites-grid">
                            <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
                        </div>

                        <div class="form-actions">
                            <button id="save-subscription" class="btn btn-primary" disabled>
                                <span class="btn-text">êµ¬ë… ì„¤ì • ì €ì¥</span>
                                <div class="btn-loading hidden">
                                    <div class="spinner-small"></div>
                                </div>
                            </button>
                            <button id="test-notification" class="btn btn-secondary">
                                í…ŒìŠ¤íŠ¸ ì•Œë¦¼
                            </button>
                        </div>
                    </div>

                    <!-- êµ¬ë… ê´€ë¦¬ ì˜ì—­ -->
                    <div id="subscription-list" class="hidden">
                        <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
                    </div>

                    <!-- êµ¬ë… ìˆ˜ì • ë²„íŠ¼ë“¤ -->
                    <div class="subscription-edit-actions hidden">
                        <button id="save-subscriptions" class="btn btn-primary" style="display: none;">
                            êµ¬ë… ì €ì¥
                        </button>
                        <button id="cancel-edit" class="btn btn-secondary" style="display: none;">
                            ì·¨ì†Œ
                        </button>
                    </div>
                </div>
            </div>

            <!-- ìƒíƒœ ë©”ì‹œì§€ -->
            <div id="message-area" class="message-area hidden">
                <!-- ë™ì ìœ¼ë¡œ ë©”ì‹œì§€ê°€ í‘œì‹œë¨ -->
            </div>
        </main>

        <footer class="footer">
            <div class="footer-content">
                <div class="footer-links">
                    <a href="status-enhanced.html" class="footer-link">í¬ë¡¤ë§ ìƒíƒœ í™•ì¸</a>
                    <a href="#" id="test-notification" class="footer-link">ì•Œë¦¼ í…ŒìŠ¤íŠ¸</a>
                </div>
                <p class="footer-text">
                    Â© 2024 CUK ê³µì§€ì‚¬í•­ ì•Œë¦¬ë¯¸ | 
                    <a href="https://www.catholic.ac.kr" target="_blank" rel="noopener">ê°€í†¨ë¦­ëŒ€í•™êµ</a>
                </p>
            </div>
        </footer>
    </div>

    <!-- Firebase v9+ ëª¨ë“ˆëŸ¬ SDK (ê³µì‹ ë¬¸ì„œ ê¶Œì¥ ë°©ì‹) -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.13.2/firebase-app.js';
        import { getMessaging, getToken, onMessage, isSupported } from 'https://www.gstatic.com/firebasejs/10.13.2/firebase-messaging.js';
        
        // ì „ì—­ìœ¼ë¡œ ë…¸ì¶œ
        window.firebaseV9 = {
            initializeApp,
            getMessaging,
            getToken,
            onMessage,
            isSupported
        };
        
        console.log('ğŸ”¥ Firebase v9+ ëª¨ë“ˆëŸ¬ SDK ë¡œë“œ ì™„ë£Œ');
    </script>
    
    <!-- í™˜ê²½ ì„¤ì • -->
    <script src="config.js"></script>
    
    <!-- ë©”ì¸ ìŠ¤í¬ë¦½íŠ¸ -->
    <script src="script.js"></script>
</body>
</html>